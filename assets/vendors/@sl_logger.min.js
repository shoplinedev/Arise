!function(t,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.globalSLM=o():t.globalSLM=o()}(self,(()=>(()=>{"use strict";var t={r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};t.r(o);var n,e,r,i=function(){return i=Object.assign||function(t){for(var o,n=1,e=arguments.length;n<e;n++)for(var r in o=arguments[n])Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);return t},i.apply(this,arguments)};function p(t,o,n,e){var r,i=arguments.length,p=i<3?o:null===e?e=Object.getOwnPropertyDescriptor(o,n):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(t,o,n,e);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(p=(i<3?r(p):i>3?r(o,n,p):r(o,n))||p);return i>3&&p&&Object.defineProperty(o,n,p),p}function a(t,o,n){if(n||2===arguments.length)for(var e,r=0,i=o.length;r<i;r++)!e&&r in o||(e||(e=Array.prototype.slice.call(o,0,r)),e[r]=o[r]);return t.concat(e||Array.prototype.slice.call(o))}!function(t){t.P0="P0",t.P1="P1",t.P2="P2"}(n||(n={})),function(t){t.Start="开始",t.Success="成功",t.Failure="失败"}(e||(e={})),function(t){t.Info="info",t.Log="log",t.Warn="warn",t.Error="error"}(r||(r={}));var s=function(t){return function(o,n,e){var r=e.value;e.value=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];try{return r.apply(this,o)}catch(o){return console.error("logger: ".concat(n,"方法执行出错"),o),t}}}},u=function(t){return t.reduce((function(t,o){var n={};try{n=o()}catch(t){console.error("计算列表结果出错",t)}return i(i({},t),n)}),{})},c=function(){function t(t){var o=this;this.options={owner:"",action:"",tags:{},getTagsFn:[],data:{},getDataFn:[],transports:[]},this.report=function(t,n,e){var r,p=u(o.options.getTagsFn),a=u(o.options.getDataFn),s=i(i({level:t,owner:o.options.owner,action:o.options.action},e),{tags:i(i({},o.options.tags),p),data:i(i({},o.options.data),a),message:n});r=null==e?void 0:e.data,"[object Object]"===Object.prototype.toString.call(r)?s.data=i(i({},s.data),null==e?void 0:e.data):s.data=i(i({},s.data),{custom_data:null==e?void 0:e.data}),(null==e?void 0:e.tags)&&(s.tags=i(i({},s.tags),e.tags)),function(t,o){var n=t;o.forEach((function(t){var o=t(n);o&&(n=o)}))}(s,o.options.transports)},this.options=i(i({},this.options),t)}return t.prototype.withOwner=function(o){return new t(i(i({},this.options),{owner:o}))},t.prototype.pipeOwner=function(o){if(!o)return this;var n;return n=this.options.owner?"".concat(this.options.owner,".").concat(o):o,new t(i(i({},this.options),{owner:n}))},t.prototype.withAction=function(o){return new t(i(i({},this.options),{action:o}))},t.prototype.pipeTags=function(o){return o?new t(i(i({},this.options),"function"==typeof o?{getTagsFn:a(a([],this.options.getTagsFn,!0),[o],!1)}:{tags:i(i({},this.options.tags),o)})):this},t.prototype.pipeData=function(o){return o?new t(i(i({},this.options),"function"==typeof o?{getDataFn:a(a([],this.options.getDataFn,!0),[o],!1)}:{data:i(i({},this.options.data),o)})):this},t.prototype.pipeTransport=function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];var e=this.options.transports.concat(o);return new t(i(i({},this.options),{transports:e}))},t.prototype.info=function(t,o){this.report(r.Info,t,o)},t.prototype.log=function(t,o){this.report(r.Log,t,o)},t.prototype.warn=function(t,o){this.report(r.Warn,t,o)},t.prototype.error=function(t,o){this.report(r.Error,t,o)},p([s(new t)],t.prototype,"withOwner",null),p([s(new t)],t.prototype,"pipeOwner",null),p([s(new t)],t.prototype,"withAction",null),p([s(new t)],t.prototype,"pipeTags",null),p([s(new t)],t.prototype,"pipeData",null),p([s(new t)],t.prototype,"pipeTransport",null),p([s(new t)],t.prototype,"info",null),p([s(new t)],t.prototype,"log",null),p([s(new t)],t.prototype,"warn",null),p([s(new t)],t.prototype,"error",null),t}(),l=new c;let f;Object.defineProperty(l,"options",{writable:!1,configurable:!1});const d=new Uint8Array(16);function y(){if(!f&&(f="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!f))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return f(d)}const g=[];for(let t=0;t<256;++t)g.push((t+256).toString(16).slice(1));var h={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function w(t,o,n){if(h.randomUUID&&!o&&!t)return h.randomUUID();const e=(t=t||{}).random||(t.rng||y)();if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,o){n=n||0;for(let t=0;t<16;++t)o[n+t]=e[t];return o}return function(t,o=0){return(g[t[o+0]]+g[t[o+1]]+g[t[o+2]]+g[t[o+3]]+"-"+g[t[o+4]]+g[t[o+5]]+"-"+g[t[o+6]]+g[t[o+7]]+"-"+g[t[o+8]]+g[t[o+9]]+"-"+g[t[o+10]]+g[t[o+11]]+g[t[o+12]]+g[t[o+13]]+g[t[o+14]]+g[t[o+15]]).toLowerCase()}(e)}var v=new(function(){function t(){this.fnList=[],this.get()}return t.prototype.get=function(){var t,o,n=sessionStorage.getItem("SL_LOGGER_SESSION_ID"),e=("log_session_id",t=document.cookie.split("; "),o={},t.forEach((function(t){var n=t.split("="),e=n[0],r=n[1];e&&(o[e]=r||"")})),o.log_session_id||"");if(n)return n!==e&&this.updateId(n),n;var r=w();return this.updateId(r),r},t.prototype.set=function(t){return!!t&&(this.updateId(t),this.fnList.forEach((function(o){return o(t)})),!0)},t.prototype.refresh=function(){var t=w();return this.updateId(t),this.fnList.forEach((function(o){return o(t)})),!0},t.prototype.onChange=function(t){this.fnList.push(t)},t.prototype.updateId=function(t){sessionStorage.setItem("SL_LOGGER_SESSION_ID",t),function(t,o,n){void 0===n&&(n="/");var e="".concat("log_session_id","=").concat(o);n&&(e+="; path=".concat(n)),document.cookie=e}(0,t)},p([s("")],t.prototype,"get",null),p([s(!1)],t.prototype,"set",null),p([s(!1)],t.prototype,"refresh",null),p([s()],t.prototype,"onChange",null),p([s()],t.prototype,"updateId",null),t}());return window["@sl/logger"]={sessionId:v},o})()));