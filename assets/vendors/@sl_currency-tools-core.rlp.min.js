!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={exports:{}};!function(e){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=Array(e);r<e;r++)o[r]=t[r];return o}var o,n,a,u,c,i,l,f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},m=1/0,y=0/0,s=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,d=/^0o[0-7]+$/i,v=parseInt,b="object"==typeof f&&f&&f.Object===Object&&f,h="object"==typeof self&&self&&self.Object===Object&&self,C=b||h||Function("return this")(),_=Object.prototype.toString,S=C.Symbol,w=Math.min,F=S?S.prototype:void 0,M=F?F.toString:void 0;function P(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function D(t){return"symbol"==typeof t||!!t&&"object"==typeof t&&"[object Symbol]"==_.call(t)}function O(t){if("number"==typeof t)return t;if(D(t))return y;if(P(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=P(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var r=g.test(t);return r||d.test(t)?v(t.slice(2),r?2:8):p.test(t)?y:+t}function W(t){return null==t?"":function(t){if("string"==typeof t)return t;if(D(t))return M?M.call(t):"";var e=t+"";return"0"==e&&1/t==-m?"-0":e}(t)}var j=(o=Math.round,function(t,e){var r,n,a;if(t=O(t),e=w((a=(n=(r=e)?(r=O(r))===m||r===-m?(r<0?-1:1)*17976931348623157e292:r==r?r:0:0===r?r:0)%1,n==n?a?n-a:n:0),292)){var u=(W(t)+"e").split("e");return+((u=(W(o(u[0]+"e"+(+u[1]+e)))+"e").split("e"))[0]+"e"+(+u[1]-e))}return o(t)}),B={amount:{value:"amount",decimalSymbol:".",groupSymbol:",",format:"amount"},amount_no_decimals:{value:"amount_no_decimals",decimalSymbol:"",groupSymbol:",",format:"amount_no_decimals"},amount_with_comma_separator:{value:"amount_with_comma_separator",decimalSymbol:",",groupSymbol:".",format:"amount_with_comma_separator"},amount_no_decimals_with_comma_separator:{value:"amount_no_decimals_with_comma_separator",decimalSymbol:"",groupSymbol:".",format:"amount_no_decimals_with_comma_separator"},amount_with_apostrophe_separator:{value:"amount_with_apostrophe_separator",decimalSymbol:".",groupSymbol:"'",format:"amount_with_apostrophe_separator"},amount_no_decimals_with_space_separator:{value:"amount_no_decimals_with_space_separator",decimalSymbol:"",groupSymbol:" ",format:"amount_no_decimals_with_space_separator"},amount_with_space_separator:{value:"amount_with_space_separator",decimalSymbol:",",groupSymbol:" ",format:"amount_with_space_separator"}},N=/.*\{\{(.*)\}\}/,x=/(\{\{.*\}\})/,T="amount";(n=a||(a={})).PREFIX="prefix",n.SUFFIX="suffix";var I=Object.entries(B).map(function(t){return(function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r,o,n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a=[],u=!0,c=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{u||null==n.return||n.return()}finally{if(c)throw o}}return a}}(t,2)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);if("Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return r(t,e)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1].value}),R=new Map,Y=new Map,$=new Map,A=new Map,E=new Map,X=new Map,G=new Map,U=new Map,k=new Map,q=function(){R.clear(),Y.clear(),$.clear(),A.clear(),E.clear(),X.clear(),G.clear(),U.clear(),k.clear()},z=function(t){i=t},H=function(){return i},J=function(){return l},K=function(t){return I.includes(t||"")},L=function(t){var e=t.match(N);if(e&&e.length){var r=(e[1]||"").trim();return K(r)?B[r]:null}return null},Q=function(t,e,r){var o=L(e),n=(r?X:E).get(t),a=n&&n.format;return o||(K(a)?B[a]:B[T])},V=function(t){return L(t)||B[T]},Z=function(t,e){R.set(t,e)},tt=function(t,e){Y.set(t,e)},te=function(t,e,r){var o,n,a=t.match(N);return null!=a&&a.length&&I.includes((null==a?void 0:null===(o=a[1])||void 0===o?void 0:o.trim())||"")?t:(null===(n=(r?X:E).get(e))||void 0===n?void 0:n.origin)||"{{amount}}"},tr=function(t,e){var r=V(e).format;E.set(t,{format:r,origin:e})},to=function(t,e){var r=V(e).format;X.set(t,{format:r,origin:e})},tn=function(t,e){var r=Q(t,e,!1),o=r.format,n=r.decimalSymbol,a=r.groupSymbol;U.set(t,n),k.set(t,a),$.set(t,{format:o,origin:te(e,t,!1)})},ta=function(t,e){var r=Q(t,e,!0),o=r.format,n=r.decimalSymbol,a=r.groupSymbol;U.set(t,n),k.set(t,a),A.set(t,{format:o,origin:te(e,t,!0)})},tu=function(t,e){if(!e){console.error("".concat(t,"无对应的messageWithoutDefaultCurrency配置"));return}(null==e?void 0:e.replace(/^\s+/,"").indexOf("{{"))>0?G.set(t,a.PREFIX):G.set(t,a.SUFFIX)},tc=function(t){var e=J().find(function(e){return e.currencyCode===t});if(!e){console.error("获取".concat(t,"对应的货币配置失败"));return}var r=e.messageWithoutDefaultCurrency,o=e.messageWithCurrency,n=e.messageWithoutCurrency,a=e.messageWithDefaultCurrency,u=e.currencyCode,c=e.rate,i=void 0===c?2:c,l=e.currencySymbol;Z(u,i),tt(u,l),tu(u,r),tr(u,r),to(u,a),tn(u,n),ta(u,o)},ti=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.replace(x,t)},tl=function(t,e,r){var o,n,a,u,c=B[e],i=c.groupSymbol,l=c.decimalSymbol,f=t<0,m=(a=j(f?-t:t,r),0!==r&&l?(o=Math.floor(a),n=function(t,e,r){if(t.length>=e)return t;var o=e-t.length,n=r;if(o>r.length)for(var a=0;a<o/r.length;a++)n+=r;return t+n.slice(0,o)}("".concat(j(a-o,r)).replace(/^0?\.?/,""),r,"0")):(o=j(a),n=""),{integerPart:o,fractionPart:n}),y=m.fractionPart,s=(u=m.integerPart,"".concat(u||0).replace(/(\d)(?=(?:\d{3})+$)/g,"$1".concat(i)));return{integer:"".concat(f?"-":"").concat(s),fraction:y,groupSymbol:i,decimalSymbol:l}},tf=function(t,e){var r,o=(null==e?void 0:e.code)||u||"CNY";$.get(o)||tc(o);var n=t_(o),a=tC(o),c=td(o),i=tv(o),l=($.get(o)||{}).format,f=tl(t,K(l)?l:T,2),m=f.integer,y=f.fraction,s=[],p=(null==m?void 0:m.split(n))||[];return p.forEach(function(t,e){s.push({type:"integer",value:t}),e!==p.length-1&&s.push({type:"group",value:n})}),s.push({type:"decimal",value:a}),s.push({type:"fraction",value:null!==(r=null==y?void 0:y.trim())&&void 0!==r?r:""}),"prefix"===i?s.unshift({type:"currency",value:c}):s.push({type:"currency",value:c}),s},tm=function(t){var e,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CNY",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,a=arguments.length>3?arguments[3]:void 0,u=a||H();return o===n?t:t*(null!==(e=u[n])&&void 0!==e?e:1)/(null!==(r=u[o])&&void 0!==r?r:1)},ty=function(t,e,r){var o=e?A:$,n=e?tp:tg,a=r||{},i=a.from,l=void 0===i?u:i,f=a.to,m=void 0===f?c:f,y=a.currencyRates;return o.get(l)||tc(l),o.get(m)||tc(m),n(tm(t,l,m,y||H()),{code:m})},ts=function(t,e,r){var o,n=e?A:$,a=(null==r?void 0:r.code)||u||"CNY";n.get(a)||tc(a);var c=n.get(a)||{},i=c.format,l=c.origin,f=null!==(o=null==r?void 0:r.digits)&&void 0!==o?o:2,m=tl(t/Math.pow(10,f),K(i)?i:T,f),y=m.integer,s=m.fraction,p=m.decimalSymbol;return ti(p&&f?"".concat(y).concat(p).concat(s):y,l)},tp=function(t,e){return ts(t,!0,e)},tg=function(t,e){return ts(t,!1,e)},td=function(t){var e;return $.get(t)||tc(t),null!==(e=Y.get(t))&&void 0!==e?e:""},tv=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CNY";return $.get(t)||tc(t),G.get(t)},tb=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return("number"!=typeof t?Number(t):t)/Math.pow(10,e)},th=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return j(("number"!=typeof t?Number(t):t)*Math.pow(10,e),0)},tC=function(t){var e;return $.get(t)||tc(t),null!==(e=U.get(t))&&void 0!==e?e:""},t_=function(t){var e;return $.get(t)||tc(t),null!==(e=k.get(t))&&void 0!==e?e:""};e.convertCalc=tm,e.convertFormat=function(t,e){return ty(t,!0,e)},e.convertFormatWithoutCurrency=function(t,e){return ty(t,!1,e)},e.covertCalc=tm,e.defaultCurrency="CNY",e.defaultCurrencyDigit=2,e.defaultPresentDigit=2,e.format=tp,e.formatCurrency=function(t){return tb(t,2)},e.formatMoneyWithoutCurrency=function(t,e){var r=(null==e?void 0:e.code)||u||"CNY";$.get(r)||tc(r);var o=($.get(r)||{}).format,n=tl(t/100,K(o)?o:T,2),a=n.integer,c=n.fraction,i=n.decimalSymbol;return i?"".concat(a).concat(i).concat(c):a},e.formatNumber=tb,e.formatPercent=function(t){return tb(t,2)},e.formatWithoutCurrency=tg,e.getConvertPrice=function(t,e){var r=null!=e?e:{},o=r.from,n=r.code,a=r.to,l=r.currencyRates,f=o||u||"CNY";$.get(f)||tc(f);var m=a||n||c;$.get(m)||tc(m);var y=tf(tm(tb(t),f,m,l||i),{code:m}),s={group:"",integer:"",decimal:"",fraction:"",symbolOrder:"",currencySymbol:""},p=tv(m);return p&&(s.symbolOrder=p),y.forEach(function(t){var e=t.value;"currency"===t.type&&(s.currencySymbol=e),"integer"===t.type&&(s.integer?s.integer="".concat(s.integer).concat(s.group).concat(e):s.integer=e),"group"===t.type&&(s.group=e),"decimal"===t.type&&(s.decimal=e),"fraction"===t.type&&(s.fraction=e)}),s},e.getCurrencyConfig=J,e.getCurrencyRates=H,e.getDecimalSymbolByCode=tC,e.getDefaultToCurrency=function(){return c},e.getDigitsByCode=function(t){return $.get(t)||tc(t),R.get(t)},e.getFormatParts=tf,e.getGroupSymbolByCode=t_,e.getStoreCurrency=function(){return u},e.getSymbolByCode=td,e.getSymbolOrderByCode=tv,e.parseCustomFormat=Q,e.parseCustomFormatWithCurrency=ta,e.parseCustomFormatWithoutCurrency=tn,e.parseDefaultFormat=V,e.parseDefaultFormatWithCurrency=to,e.parseDefaultFormatWithoutCurrency=tr,e.setCurrencyConfig=function(t){var e={};(l=t).forEach(function(t){e[t.currencyCode]=t.exchangeRate}),z(e),"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)&&q()},e.setCurrencyRates=z,e.setDefaultToCurrency=function(t){c=t},e.setStoreCurrency=function(t){u=t},e.unformatCurrency=function(t){return th(t,2)},e.unformatNumber=th,e.unformatPercent=function(t){return th(t,2)},Object.defineProperty(e,"__esModule",{value:!0})}(e.exports);var r=e.exports;window["@sl/currency-tools-core"]={formatMoneyWithoutCurrency:r.formatMoneyWithoutCurrency,formatWithoutCurrency:r.formatWithoutCurrency,getGroupSymbolByCode:r.getGroupSymbolByCode,setCurrencyConfig:r.setCurrencyConfig,setStoreCurrency:r.setStoreCurrency,setDefaultToCurrency:r.setDefaultToCurrency,getConvertPrice:r.getConvertPrice,convertFormat:r.convertFormat,covertCalc:r.covertCalc,convertFormatWithoutCurrency:r.convertFormatWithoutCurrency,format:r.format,unformatNumber:r.unformatNumber,formatNumber:r.formatNumber,unformatCurrency:r.unformatCurrency,unformatPercent:r.unformatPercent,formatCurrency:r.formatCurrency,formatPercent:r.formatPercent,getDigitsByCode:r.getDigitsByCode,getSymbolByCode:r.getSymbolByCode,getSymbolOrderByCode:r.getSymbolOrderByCode,getDecimalSymbolByCode:r.getDecimalSymbolByCode,getFormatParts:r.getFormatParts}}();
