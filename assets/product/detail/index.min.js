"use strict";

(self["webpackChunkArise"] = self["webpackChunkArise"] || []).push([ [ "product-template" ], {
    "./src/assets/product/detail/main.js": (__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {
        __webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");
        var sectionsLoad = __webpack_require__("../shared/browser/utils/sectionsLoad/index.js");
        __webpack_require__("./src/assets/product/commons/js/product-item.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.for-each.js");
        __webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js");
        __webpack_require__("./node_modules/core-js/modules/es.object.keys.js");
        __webpack_require__("./node_modules/core-js/modules/es.number.constructor.js");
        __webpack_require__("./node_modules/core-js/modules/es.symbol.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.filter.js");
        __webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");
        __webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js");
        __webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.is-array.js");
        __webpack_require__("./node_modules/core-js/modules/es.symbol.description.js");
        __webpack_require__("./node_modules/core-js/modules/es.object.to-string.js");
        __webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.iterator.js");
        __webpack_require__("./node_modules/core-js/modules/es.string.iterator.js");
        __webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.slice.js");
        __webpack_require__("./node_modules/core-js/modules/es.function.name.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.from.js");
        var report = __webpack_require__("../shared/browser/utils/report/index.js");
        var tool = __webpack_require__("../shared/browser/utils/report/tool.js");
        var currency = __webpack_require__("../shared/browser/utils/currency/index.js");
        function _slicedToArray(arr, i) {
            return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
        }
        function _nonIterableRest() {
            throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }
        function _unsupportedIterableToArray(o, minLen) {
            if (!o) return;
            if ("string" === typeof o) return _arrayLikeToArray(o, minLen);
            var n = Object.prototype.toString.call(o).slice(8, -1);
            if ("Object" === n && o.constructor) n = o.constructor.name;
            if ("Map" === n || "Set" === n) return Array.from(o);
            if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
        }
        function _arrayLikeToArray(arr, len) {
            if (null == len || len > arr.length) len = arr.length;
            for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];
            return arr2;
        }
        function _iterableToArrayLimit(arr, i) {
            var _i = arr && ("undefined" !== typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]);
            if (null == _i) return;
            var _arr = [];
            var _n = true;
            var _d = false;
            var _s, _e;
            try {
                for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
                    _arr.push(_s.value);
                    if (i && _arr.length === i) break;
                }
            } catch (err) {
                _d = true;
                _e = err;
            } finally {
                try {
                    if (!_n && null != _i["return"]) _i["return"]();
                } finally {
                    if (_d) throw _e;
                }
            }
            return _arr;
        }
        function _arrayWithHoles(arr) {
            if (Array.isArray(arr)) return arr;
        }
        function ownKeys(object, enumerableOnly) {
            var keys = Object.keys(object);
            if (Object.getOwnPropertySymbols) {
                var symbols = Object.getOwnPropertySymbols(object);
                if (enumerableOnly) symbols = symbols.filter((function(sym) {
                    return Object.getOwnPropertyDescriptor(object, sym).enumerable;
                }));
                keys.push.apply(keys, symbols);
            }
            return keys;
        }
        function _objectSpread(target) {
            for (var i = 1; i < arguments.length; i++) {
                var source = null != arguments[i] ? arguments[i] : {};
                if (i % 2) ownKeys(Object(source), true).forEach((function(key) {
                    _defineProperty(target, key, source[key]);
                })); else if (Object.getOwnPropertyDescriptors) Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); else ownKeys(Object(source)).forEach((function(key) {
                    Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
                }));
            }
            return target;
        }
        function _defineProperty(obj, key, value) {
            if (key in obj) Object.defineProperty(obj, key, {
                value,
                enumerable: true,
                configurable: true,
                writable: true
            }); else obj[key] = value;
            return obj;
        }
        var formatCurrency = currency["default"].formatCurrency;
        var currentSpu = window.SL_State.get("product.spu");
        var EVENT_ID = "60006253";
        var report_parent = "#page-product-detail";
        function hdReport(options) {
            var _window$HdSdk;
            null === (_window$HdSdk = window.HdSdk) || void 0 === _window$HdSdk ? void 0 : _window$HdSdk.shopTracker.report(EVENT_ID, options);
        }
        function clickCompReport(custom_component) {
            hdReport({
                event_name: "click_component",
                page: "pdp",
                custom_component
            });
        }
        function exposeCompReport(custom_component) {
            hdReport({
                event_name: "component_view",
                page: "pdp",
                custom_component
            });
        }
        var exposeConfig = {
            amazon: {
                cls: "product_thirdParty_amazon",
                statName: "gotoamazon"
            },
            productDesc: {
                cls: "product-detail-description",
                statName: "product_descri"
            },
            pcReviews: {
                cls: "product-comment-pc",
                statName: "reviews"
            },
            mReviews: {
                cls: "product-comment-mobile",
                statName: "reviews"
            },
            thirdPartyShare: {
                cls: "product-third-party-share_productDetail",
                statName: "share"
            },
            mMoreReviews: {
                cls: "product-comment-mobile-summary-more",
                statName: "more_reviews"
            },
            buyNow: {
                cls: "__sl-custom-track-product-detail-buy-now",
                statName: "buy_now"
            },
            moreBundling: {
                cls: "sales__productBundled",
                statName: "more_bundling"
            },
            viewMore: {
                cls: "product-info-salesTag",
                statName: "view_more"
            }
        };
        function collectExposeObserver() {
            Object.keys(exposeConfig).forEach((function(item) {
                var selector = exposeConfig[item].cls;
                (0, report.collectObserver)({
                    selector: "".concat(report_parent, " .").concat(selector)
                });
            }));
        }
        __SL_$__((function() {
            __SL_$__(document.body).on("click", "".concat(report_parent, " .__sl-custom-track-product-recommend-item"), (function() {
                var productId = __SL_$__(this).data("id");
                var productIndex = __SL_$__(this).data("index");
                var productStatus = __SL_$__(this).data("status") ? "selling" : "soldout";
                var statData = {
                    based_product_id: null === currentSpu || void 0 === currentSpu ? void 0 : currentSpu.spuSeq,
                    rec_product_id: productId,
                    rank: Number(productIndex) + 1,
                    status: productStatus
                };
                hdReport(_objectSpread({
                    event_name: "recommenditem"
                }, statData));
            })).on("click", "".concat(report_parent, " .product_thirdParty_amazon"), (function() {
                clickCompReport("gotoamazon");
            })).on("click", "".concat(report_parent, " .product-third-party-share_productDetail .third-party-item"), (function() {
                var thisPlatform = __SL_$__(this).data("platform");
                var platformMap = {
                    Share: "fb",
                    Tweet: "twitter",
                    LINE: "line",
                    Whatsapp: "whatsapp"
                };
                clickCompReport("share");
                hdReport({
                    event_name: "product_share",
                    share_dest: platformMap[thisPlatform]
                });
            })).on("click", "".concat(report_parent, " .product-comment-mobile-summary-more"), (function() {
                clickCompReport("more_reviews");
            })).on("click", "".concat(report_parent, " .__sl-custom-track-product-detail-buy-now"), (function() {
                clickCompReport("buy_now");
            })).on("click", "".concat(report_parent, " .sales__productBundled"), (function() {
                clickCompReport("more_bundling");
            }));
            var isExposedProductVideo = false;
            var isPlayedProductVideo = false;
            window.SL_EventBus.on("product:product-play-video", (function() {
                if (!isPlayedProductVideo) {
                    clickCompReport("play_video");
                    isPlayedProductVideo = true;
                }
            }));
            window.SL_EventBus.on("product:expose-product-video", (function() {
                if (!isExposedProductVideo) {
                    exposeCompReport("play_video");
                    isExposedProductVideo = true;
                }
            }));
            window.SL_EventBus.emit("global:hdReport:exit", [ EVENT_ID, null ]);
            collectExposeObserver();
            window.SL_EventBus.on("global:hdReport:expose", (function(target) {
                if (__SL_$__(target).hasClass(exposeConfig.amazon.cls)) exposeCompReport(exposeConfig.amazon.statName);
                if (__SL_$__(target).hasClass(exposeConfig.productDesc.cls)) exposeCompReport(exposeConfig.productDesc.statName);
                if (__SL_$__(target).hasClass(exposeConfig.pcReviews.cls)) exposeCompReport(exposeConfig.pcReviews.statName);
                if (__SL_$__(target).hasClass(exposeConfig.mReviews.cls)) exposeCompReport(exposeConfig.mReviews.statName);
                if (__SL_$__(target).hasClass(exposeConfig.thirdPartyShare.cls)) exposeCompReport(exposeConfig.thirdPartyShare.statName);
                if (__SL_$__(target).hasClass(exposeConfig.mMoreReviews.cls)) exposeCompReport(exposeConfig.mMoreReviews.statName);
                if (__SL_$__(target).hasClass(exposeConfig.buyNow.cls)) exposeCompReport(exposeConfig.buyNow.statName);
                if (__SL_$__(target).hasClass(exposeConfig.moreBundling.cls)) exposeCompReport(exposeConfig.moreBundling.statName);
                if (__SL_$__(target).hasClass(exposeConfig.viewMore.cls)) exposeCompReport(exposeConfig.viewMore.statName);
            }));
        }));
        window.SL_EventBus.on("product:sku:change", (function(_ref) {
            var _ref2 = _slicedToArray(_ref, 1), sku = _ref2[0];
            if ((null === sku || void 0 === sku ? void 0 : sku.spuSeq) === (null === currentSpu || void 0 === currentSpu ? void 0 : currentSpu.spuSeq)) if (sku) {
                hdReport({
                    event_name: "sku_click",
                    sku_id: sku.skuSeq
                });
                window.SL_EventBus.emit("global:thirdPartReport", {
                    FBPixel: [ [ "track", "ViewContent", {
                        content_ids: [ null === sku || void 0 === sku ? void 0 : sku.spuSeq ],
                        content_name: currentSpu.title || "",
                        content_category: "",
                        content_type: "product_group",
                        currency: window.SL_State.get("storeInfo.currency"),
                        value: formatCurrency(sku.price || 0)
                    }, {
                        eventID: "viewContent".concat((0, tool.getEventID)())
                    } ] ]
                });
            }
        }));
        var product_preview = __webpack_require__("./src/assets/product/detail/js/product-preview.js");
        function _classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function");
        }
        function _defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
                var descriptor = props[i];
                descriptor.enumerable = descriptor.enumerable || false;
                descriptor.configurable = true;
                if ("value" in descriptor) descriptor.writable = true;
                Object.defineProperty(target, descriptor.key, descriptor);
            }
        }
        function _createClass(Constructor, protoProps, staticProps) {
            if (protoProps) _defineProperties(Constructor.prototype, protoProps);
            if (staticProps) _defineProperties(Constructor, staticProps);
            return Constructor;
        }
        function main_defineProperty(obj, key, value) {
            if (key in obj) Object.defineProperty(obj, key, {
                value,
                enumerable: true,
                configurable: true,
                writable: true
            }); else obj[key] = value;
            return obj;
        }
        var ProductPreviewSection = function() {
            function ProductPreviewSection() {
                _classCallCheck(this, ProductPreviewSection);
                main_defineProperty(this, "instance", null);
                this.instance = (0, product_preview["default"])({
                    id: "productDetail",
                    statePath: "product",
                    offsetTop: 20,
                    module: "pdp"
                });
            }
            _createClass(ProductPreviewSection, [ {
                key: "onUnload",
                value: function() {
                    if (this.instance) {
                        var _this$instance;
                        null === (_this$instance = this.instance) || void 0 === _this$instance ? void 0 : _this$instance.destroy();
                    }
                }
            } ]);
            return ProductPreviewSection;
        }();
        main_defineProperty(ProductPreviewSection, "type", "product-preview");
        (0, sectionsLoad.registrySectionConstructor)("product-preview", ProductPreviewSection);
    }
}, __webpack_require__ => {
    var __webpack_exec__ = moduleId => __webpack_require__(__webpack_require__.s = moduleId);
    __webpack_require__.O(0, [ "vendor" ], (() => __webpack_exec__("./src/assets/product/detail/main.js")));
    __webpack_require__.O();
} ]);