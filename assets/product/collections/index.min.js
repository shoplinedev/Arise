"use strict";

(self["webpackChunkArise"] = self["webpackChunkArise"] || []).push([ [ "product-collection" ], {
    "./src/assets/product/collections/main.js": (__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {
        __webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");
        var sectionsLoad = __webpack_require__("../shared/browser/utils/sectionsLoad/index.js");
        __webpack_require__("./node_modules/core-js/modules/web.timers.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.concat.js");
        __webpack_require__("./node_modules/core-js/modules/es.object.keys.js");
        __webpack_require__("./node_modules/core-js/modules/es.symbol.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.filter.js");
        __webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.for-each.js");
        __webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js");
        __webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js");
        __webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js");
        var querystring = __webpack_require__("./node_modules/querystring/index.js");
        var url = __webpack_require__("./src/assets/commons/utils/url.js");
        function ownKeys(object, enumerableOnly) {
            var keys = Object.keys(object);
            if (Object.getOwnPropertySymbols) {
                var symbols = Object.getOwnPropertySymbols(object);
                if (enumerableOnly) symbols = symbols.filter((function(sym) {
                    return Object.getOwnPropertyDescriptor(object, sym).enumerable;
                }));
                keys.push.apply(keys, symbols);
            }
            return keys;
        }
        function _objectSpread(target) {
            for (var i = 1; i < arguments.length; i++) {
                var source = null != arguments[i] ? arguments[i] : {};
                if (i % 2) ownKeys(Object(source), true).forEach((function(key) {
                    _defineProperty(target, key, source[key]);
                })); else if (Object.getOwnPropertyDescriptors) Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); else ownKeys(Object(source)).forEach((function(key) {
                    Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
                }));
            }
            return target;
        }
        function _defineProperty(obj, key, value) {
            if (key in obj) Object.defineProperty(obj, key, {
                value,
                enumerable: true,
                configurable: true,
                writable: true
            }); else obj[key] = value;
            return obj;
        }
        const sort = function() {
            __SL_$__("#collectionsAjaxInner").delegate("#collection-sort", "change", (function() {
                var newQueryObj = _objectSpread(_objectSpread({}, (0, url.getUrlAllQuery)()), {}, {
                    sort_type: __SL_$__(this).val()
                });
                var newQueryStr = querystring.stringify(newQueryObj);
                setTimeout((function() {
                    window.location.href = "".concat(window.location.origin + window.location.pathname, "?").concat(newQueryStr);
                }), 0);
            }));
            if ("none" === __SL_$__("#product-list-list-header-filter").css("display")) __SL_$__(".product-list-filter-container").css("width", "100%");
        };
        var createShadowDom = __webpack_require__("./src/assets/product/commons/js/createShadowDom.js");
        __webpack_require__("./node_modules/core-js/modules/es.function.bind.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.find.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.from.js");
        __webpack_require__("./node_modules/core-js/modules/es.string.iterator.js");
        __webpack_require__("./node_modules/core-js/modules/es.array.index-of.js");
        var axios = __webpack_require__("./node_modules/axios/index.js");
        var axios_default = __webpack_require__.n(axios);
        var i18n = __webpack_require__("../shared/browser/utils/i18n.js");
        var api_logger = __webpack_require__("../shared/browser/events/utils/api-logger.js");
        var EVENT_NAME = "Product::UpdateSection::Filter";
        var logger = (0, api_logger["default"])(EVENT_NAME);
        var external = window.Shopline && window.Shopline.event;
        var filterUpdateSection = function(data) {
            if (external) {
                logger.info("[emit]", data);
                return external.emit(EVENT_NAME, {
                    data,
                    onSuccess: function(result) {
                        logger.info("success", result);
                    },
                    onError: function(error) {
                        logger.error(error);
                    }
                });
            }
        };
        filterUpdateSection.apiName = EVENT_NAME;
        const updateSection = filterUpdateSection;
        var common = __webpack_require__("./src/assets/commons/components/modal/common.js");
        var topDrawer = __webpack_require__("./src/assets/commons/components/topDrawer/index.js");
        var BaseClass = __webpack_require__("./src/assets/commons/base/BaseClass.js");
        function sidebar_ownKeys(object, enumerableOnly) {
            var keys = Object.keys(object);
            if (Object.getOwnPropertySymbols) {
                var symbols = Object.getOwnPropertySymbols(object);
                if (enumerableOnly) symbols = symbols.filter((function(sym) {
                    return Object.getOwnPropertyDescriptor(object, sym).enumerable;
                }));
                keys.push.apply(keys, symbols);
            }
            return keys;
        }
        function sidebar_objectSpread(target) {
            for (var i = 1; i < arguments.length; i++) {
                var source = null != arguments[i] ? arguments[i] : {};
                if (i % 2) sidebar_ownKeys(Object(source), true).forEach((function(key) {
                    sidebar_defineProperty(target, key, source[key]);
                })); else if (Object.getOwnPropertyDescriptors) Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); else sidebar_ownKeys(Object(source)).forEach((function(key) {
                    Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
                }));
            }
            return target;
        }
        function sidebar_defineProperty(obj, key, value) {
            if (key in obj) Object.defineProperty(obj, key, {
                value,
                enumerable: true,
                configurable: true,
                writable: true
            }); else obj[key] = value;
            return obj;
        }
        function _classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function");
        }
        function _defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
                var descriptor = props[i];
                descriptor.enumerable = descriptor.enumerable || false;
                descriptor.configurable = true;
                if ("value" in descriptor) descriptor.writable = true;
                Object.defineProperty(target, descriptor.key, descriptor);
            }
        }
        function _createClass(Constructor, protoProps, staticProps) {
            if (protoProps) _defineProperties(Constructor.prototype, protoProps);
            if (staticProps) _defineProperties(Constructor, staticProps);
            return Constructor;
        }
        var base = new BaseClass["default"];
        var Sidebar = function() {
            function Sidebar(opt) {
                _classCallCheck(this, Sidebar);
                this.options = __SL_$__.extend({}, opt);
                this.$menu = __SL_$__(".product-list-menu");
                this.$collectionsAjaxInner = __SL_$__("#collectionsAjaxInner");
                this.listGridSelector = {
                    trigger: ".product-grid-select",
                    wrapper: "#product-list-container"
                };
                this.listListNumSelector = {
                    trigger: ".J_product_list_showby"
                };
                this.listGridWrapCls = {
                    small_grid: "row g-4 row-cols-2 row-cols-md-4 product-list-small-grid product-list-item-parent-controller",
                    list: "row g-4 row-cols-1 row-cols-md-1 product-list-single-grid product-list-item-parent-controller"
                };
                this.collapsePanelSelectors = {
                    trigger: ".collapsible-trigger",
                    module: ".collapsible-content",
                    moduleInner: ".collapsible-content-inner"
                };
                this.collapsePanelClasses = {
                    hide: "hide",
                    show: "is-open",
                    auto: "collapsible-autoHeight"
                };
                this.tagSelectors = {
                    tag: ".product_base-checkbox",
                    activeTagsList: ".product_sidebar-activeTagList",
                    activeTagsListItem: ".product_sidebar-activeTagList-item",
                    drawerFilterBtn: "#collections-drawer-filter",
                    moreBtn: ".product-list-sidebar-box-ul-more"
                };
                this.tagClasses = {
                    active: "tag-active",
                    none: "tag-none",
                    remove: "tag-remove",
                    drawerFilterBtnActive: "filter-active",
                    moreClass: "filterHasMore"
                };
                this.config = {
                    combineTags: false
                };
                this.filterRelationClasses = {
                    filters: "#js-product-collections-mobile-filters",
                    container: "#js-product-collections_filter_container",
                    wrapper: ".product_collections-filters-wrapper",
                    drawer: ".product_collections-drawer",
                    header: "#stage-header .header__layout",
                    headerWrapper: ".header-sticky-wrapper",
                    isActive: "is-active",
                    headerIsSticky: "is-sticky"
                };
                this.collectionsUrl = window.location.href;
            }
            _createClass(Sidebar, [ {
                key: "init",
                value: function() {
                    this.initCollapsePanel();
                    this.initTags();
                    this.initEventBus();
                    this.setStyle();
                    this.initListNum();
                    this.listenHeaderSticky();
                }
            }, {
                key: "initCollapsePanel",
                value: function() {
                    __SL_$__(document).on("click", this.collapsePanelSelectors.trigger, this.collapsePanelToggle.bind(this));
                }
            }, {
                key: "setTransitionHeight",
                value: function(container, height, isOpen) {
                    console.log("container, height, isOpen", container, height, isOpen);
                    if (0 === height) container.css("height", "0px"); else container.css("height", "auto");
                    if (isOpen) container.removeClass(this.collapsePanelClasses.show); else container.addClass(this.collapsePanelClasses.show);
                }
            }, {
                key: "collapsePanelToggle",
                value: function(event) {
                    var el = __SL_$__(event.currentTarget);
                    var isOpen = el.hasClass("is-open");
                    var box = el.siblings(this.collapsePanelSelectors.module);
                    if (!box) return;
                    var boxHeight = box.find(this.collapsePanelSelectors.moduleInner).outerHeight();
                    console.log("box", boxHeight);
                    if (isOpen) {
                        el.removeClass(this.collapsePanelClasses.show);
                        this.setTransitionHeight(box, 0, isOpen);
                    } else {
                        el.addClass(this.collapsePanelClasses.show);
                        this.setTransitionHeight(box, boxHeight, isOpen);
                    }
                }
            }, {
                key: "initListNum",
                value: function() {
                    __SL_$__(document).on("click", this.listListNumSelector.trigger, (function() {
                        var newQueryObj = sidebar_objectSpread(sidebar_objectSpread({}, (0, url.getUrlAllQuery)()), {}, {
                            page_num: 1,
                            page_size: __SL_$__(this).attr("data-num")
                        });
                        var newQueryStr = querystring.stringify(newQueryObj);
                        window.location.href = "".concat(window.location.origin + window.location.pathname, "?").concat(newQueryStr);
                    }));
                }
            }, {
                key: "initTags",
                value: function() {
                    __SL_$__(document).on("click", this.tagSelectors.tag, this.tagsToggle.bind(this));
                    __SL_$__(document).on("click", this.tagSelectors.activeTagsListItem, this.tagsToggle.bind(this));
                    this.config.combineTags = "true" === this.$menu.attr("data-combine-tags");
                    __SL_$__(document).on("click", this.tagSelectors.drawerFilterBtn, this.drawerToggle.bind(this));
                    __SL_$__(document).on("click", this.tagSelectors.moreBtn, this.moreClick.bind(this));
                }
            }, {
                key: "listenHeaderSticky",
                value: function() {}
            }, {
                key: "tagsToggle",
                value: function(event) {
                    var $el = __SL_$__(event.currentTarget);
                    var isActive = $el.hasClass(this.tagClasses.active);
                    var isRemove = $el.hasClass(this.tagClasses.remove);
                    if (this.config.combineTags) if (isActive) $el.removeClass(this.tagClasses.active); else {
                        $el.addClass(this.tagClasses.active);
                        if (isRemove) $el.remove(); else {
                            var tagText = $el.text();
                            var tagVal = $el.attr("data-tag");
                            var activeTagNode = this.createTagNode(tagText, tagVal);
                            __SL_$__(this.tagSelectors.activeTagsList).append(activeTagNode);
                        }
                    } else {
                        __SL_$__(this.tagSelectors.tag).removeClass(this.tagClasses.active);
                        $el.addClass(this.tagClasses.active);
                    }
                    this.setNewUrl($el);
                }
            }, {
                key: "createTagNode",
                value: function(tagText, tagVal) {
                    this.tagNode = '\n    <li class="product_sidebar-activeTagList-item tag-remove body4" data-tag="'.concat(tagVal, '">\n      <div class="product_sidebar-activeTagList-item-content">\n        <span>').concat(tagText, '</span>\n        <svg class="product_sidebar-activeTagList-item-iconClose" width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M9 1L1 9" stroke="currentColor" stroke-linecap="round"/>\n          <path d="M1 1L9 9" stroke="currentColor" stroke-linecap="round"/>\n        </svg>\n      </div>\n    </li>');
                    return this.tagNode;
                }
            }, {
                key: "getTagsSelected",
                value: function() {
                    var _this = this;
                    var $el = __SL_$__(this.tagSelectors.tag);
                    var val = [];
                    if ($el.length) Array.from($el).forEach((function(item) {
                        var $dom = __SL_$__(item);
                        if ($dom.hasClass(_this.tagClasses.active)) val.push($dom.attr("data-tag"));
                    }));
                    return val;
                }
            }, {
                key: "setTagsSelected",
                value: function(val) {
                    var $el = __SL_$__(this.tagSelectors.tag);
                    Array.from($el).filter("[data-tag=".concat(val, "]")).addClass(this.tagClasses.active);
                }
            }, {
                key: "setNewUrl",
                value: function($el) {
                    var newUrl = $el.attr("data-href") || $el.parent().attr("data-href");
                    newUrl = (0, url.updateUrlQueryParam)(newUrl, "page_num", 1);
                    window.history.pushState({}, "", newUrl);
                    this.getNewTagsContentAjax(newUrl);
                }
            }, {
                key: "getNewTagsContentAjax",
                value: function(url) {
                    url = -1 === url.indexOf("?") ? "".concat(url, "?view=ajax&isJsonSettings=true") : "".concat(url, "&view=ajax&isJsonSettings=true");
                    this.fetchCollectionHtml(url);
                }
            }, {
                key: "fetchCollectionHtml",
                value: function(url) {
                    var _this2 = this;
                    this.closeDrawer();
                    axios_default().get(url).then((function(res) {
                        var _window, _window$lozadObserver;
                        var data = res.data;
                        _this2.$collectionsAjaxInner.html(data);
                        null === (_window = window) || void 0 === _window ? void 0 : null === (_window$lozadObserver = _window.lozadObserver) || void 0 === _window$lozadObserver ? void 0 : _window$lozadObserver.observe();
                        _this2.setStyle();
                        (0, createShadowDom["default"])();
                        (0, common.enablePageScroll)();
                        null === updateSection || void 0 === updateSection ? void 0 : updateSection({
                            content: _this2.$collectionsAjaxInner
                        });
                        var headerHeightNow = __SL_$__("#stage-header").outerHeight();
                        var $top = __SL_$__("#collectionsAjaxInner").offset().top - headerHeightNow;
                        if ("undefined" !== typeof _this2.headerHeight) __SL_$__(_this2.filterRelationClasses.container).css("top", "".concat(_this2.headerHeight, "px"));
                        __SL_$__(document).scrollTop($top);
                    }));
                }
            }, {
                key: "drawerToggle",
                value: function(event) {
                    var $current = __SL_$__(event.currentTarget);
                    var $filters = __SL_$__(this.filterRelationClasses.filters);
                    var $container = __SL_$__(this.filterRelationClasses.container);
                    var $wrapper = $container.find(this.filterRelationClasses.wrapper);
                    $wrapper.parent().css("z-index", 0);
                    this.scrollToTop();
                    if ($wrapper.length > 0) {
                        this.drawerTransition($current);
                        return;
                    }
                    $container.append($filters.clone(true));
                    this.drawerTransition($current);
                }
            }, {
                key: "drawerTransition",
                value: function($current) {
                    var _this3 = this;
                    var $container = __SL_$__(this.filterRelationClasses.container);
                    var $wrapper = $container.find(this.filterRelationClasses.wrapper);
                    if (!$wrapper.hasClass(this.filterRelationClasses.isActive)) (0, common.disablePageScroll)($wrapper.get(0));
                    base.prepareTransition($wrapper, (function() {
                        _this3.toggleFilterActive($current);
                    }), (function() {
                        var isOpen = $current.hasClass("is-open");
                        var zIndex = isOpen ? 2 : 0;
                        $wrapper.parent().css({
                            zIndex
                        });
                    }));
                }
            }, {
                key: "toggleFilterActive",
                value: function($current) {
                    var $container = __SL_$__(this.filterRelationClasses.container);
                    var $wrapper = $container.find(this.filterRelationClasses.wrapper);
                    var isOpen = !$current.hasClass("is-open");
                    $container.toggleClass("is-open", isOpen);
                    $current.toggleClass("is-open", isOpen);
                    $wrapper.toggleClass(this.filterRelationClasses.isActive, isOpen);
                    if (!isOpen) (0, common.enablePageScroll)($wrapper.get(0));
                }
            }, {
                key: "scrollToTop",
                value: function() {
                    var $header = __SL_$__(this.filterRelationClasses.header);
                    var $headerWrapper = $header.parents(this.filterRelationClasses.headerWrapper);
                    var $container = __SL_$__(this.filterRelationClasses.container);
                    var headerHeight = $header.outerHeight();
                    var containerHeight = $container.outerHeight();
                    var maxFiltersHeight = window.innerHeight - headerHeight - containerHeight;
                    var windowScrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    var containerClientRectTop = $container.get(0).getBoundingClientRect().top;
                    var scrollTop = windowScrollTop + containerClientRectTop;
                    var realScrollTop = containerClientRectTop > headerHeight ? scrollTop : scrollTop - headerHeight;
                    if (containerClientRectTop === headerHeight && !$headerWrapper.hasClass(this.filterRelationClasses.headerIsSticky)) realScrollTop = scrollTop;
                    $container.get(0).style.setProperty("--maxFiltersHeight", "".concat(maxFiltersHeight, "px"));
                    window.scrollTo({
                        top: realScrollTop,
                        behavior: "smooth"
                    });
                }
            }, {
                key: "closeDrawer",
                value: function() {
                    window.SL_EventBus.emit("stage:drawer", {
                        id: "product_collections-menu-drawer",
                        status: "close"
                    });
                }
            }, {
                key: "moreClick",
                value: function(event) {
                    var $el = __SL_$__(event.currentTarget).find("span");
                    var $ul = $el.parent().siblings(this.collapsePanelSelectors.moduleInner);
                    if ($ul.hasClass(this.tagClasses.moreClass)) {
                        $ul.removeClass(this.tagClasses.moreClass);
                        $el.html((0, i18n.t)("products.product_list.less"));
                    } else {
                        $ul.addClass(this.tagClasses.moreClass);
                        $el.html((0, i18n.t)("products.product_list.more"));
                    }
                }
            }, {
                key: "initEventBus",
                value: function() {
                    var $this = this;
                    __SL_$__(document).on("shopline:section:load", (function(e) {
                        if ("collection-page" === e.detail.sectionId) {
                            var _window2, _window2$lozadObserve;
                            null === (_window2 = window) || void 0 === _window2 ? void 0 : null === (_window2$lozadObserve = _window2.lozadObserver) || void 0 === _window2$lozadObserve ? void 0 : _window2$lozadObserve.observe();
                            $this.$menu = __SL_$__(".product-list-menu");
                            $this.$collectionsAjaxInner = __SL_$__("#collectionsAjaxInner");
                            $this.config.combineTags = "true" === $this.$menu.attr("data-combine-tags");
                        }
                    }));
                    window.SL_EventBus.on(topDrawer.DRAWER_CALLBACK_EVENT_NAME, (function(_ref) {
                        var status = _ref.status, id = _ref.id;
                        if ("open" === status) __SL_$__("#".concat(id, " .drawer__main")).scrollTop(0);
                    }));
                    window.SL_EventBus.on("stage:header:stickyElementHeight", (function(_ref2) {
                        var stickyElementHeight = _ref2.stickyElementHeight;
                        var header = __SL_$__("#stage-header");
                        var headerIsSticky = header.data("sticky");
                        var headerHeight = headerIsSticky ? header.outerHeight() : 0;
                        __SL_$__("#js-product-collections_filter_container").css({
                            top: headerIsSticky ? "".concat(headerHeight + stickyElementHeight, "px") : "".concat(stickyElementHeight, "px")
                        });
                    }));
                }
            }, {
                key: "setFilterText",
                value: function() {
                    var _this$getTagsSelected;
                    var $filterDom = __SL_$__("#collections-drawer-filter");
                    if (!$filterDom) return;
                    var num = (null === (_this$getTagsSelected = this.getTagsSelected()) || void 0 === _this$getTagsSelected ? void 0 : _this$getTagsSelected.length) || 0;
                    var $filterDomText = $filterDom.find(".product_collections-drawer-filter-text");
                    var textStr = "Filter（".concat(num, "）");
                    if (num > 0 && $filterDomText) $filterDomText.html(textStr); else if (num < 0) $filterDomText.html("Filter");
                }
            }, {
                key: "setStyle",
                value: function() {
                    var header = __SL_$__("#stage-header");
                    var headerIsSticky = header.data("sticky");
                    var headerHeight = headerIsSticky ? header.outerHeight() : 0;
                    var windowHeight = __SL_$__(window).outerHeight();
                    var filterTop = 45;
                    __SL_$__(".product-list-filter").css({
                        maxHeight: headerIsSticky ? "".concat(windowHeight - headerHeight, "px") : "".concat(windowHeight - filterTop, "px"),
                        top: headerIsSticky ? "".concat(headerHeight + 10, "px") : "".concat(filterTop, "px")
                    });
                }
            } ]);
            return Sidebar;
        }();
        __webpack_require__("./src/assets/product/commons/js/preview-modal/index.js");
        __webpack_require__("./src/assets/product/commons/js/product-item.js");
        __webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js");
        __webpack_require__("./node_modules/core-js/modules/es.string.split.js");
        var report = __webpack_require__("../shared/browser/utils/report/index.js");
        var product_product_item = __webpack_require__("../shared/browser/report/product/product-item.js");
        var state_selector = __webpack_require__("../shared/browser/utils/state-selector.js");
        var newCurrency = __webpack_require__("../shared/browser/utils/newCurrency/index.js");
        var _SL_State$get, _SL_State$get2;
        function report_ownKeys(object, enumerableOnly) {
            var keys = Object.keys(object);
            if (Object.getOwnPropertySymbols) {
                var symbols = Object.getOwnPropertySymbols(object);
                if (enumerableOnly) symbols = symbols.filter((function(sym) {
                    return Object.getOwnPropertyDescriptor(object, sym).enumerable;
                }));
                keys.push.apply(keys, symbols);
            }
            return keys;
        }
        function report_objectSpread(target) {
            for (var i = 1; i < arguments.length; i++) {
                var source = null != arguments[i] ? arguments[i] : {};
                if (i % 2) report_ownKeys(Object(source), true).forEach((function(key) {
                    report_defineProperty(target, key, source[key]);
                })); else if (Object.getOwnPropertyDescriptors) Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); else report_ownKeys(Object(source)).forEach((function(key) {
                    Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
                }));
            }
            return target;
        }
        function report_defineProperty(obj, key, value) {
            if (key in obj) Object.defineProperty(obj, key, {
                value,
                enumerable: true,
                configurable: true,
                writable: true
            }); else obj[key] = value;
            return obj;
        }
        var formatCurrency = newCurrency["default"].formatCurrency;
        var hdReport = new product_product_item["default"];
        var eventid = "60006260";
        var productItemClassName = "__sl-custom-track-product-list-item";
        var productItemSelector = ".".concat(productItemClassName);
        var productMenuClassName = "__sl-custom-track-product-menu";
        var productMenuSelector = ".".concat(productMenuClassName);
        var productMenuItemClassName = "__sl-custom-track-product-menu-item";
        var productMenuItemSelector = ".".concat(productMenuItemClassName);
        var productList = null !== (_SL_State$get = state_selector.SL_State.get("products.list")) && void 0 !== _SL_State$get ? _SL_State$get : null;
        var productSortation = null !== (_SL_State$get2 = state_selector.SL_State.get("productSortation")) && void 0 !== _SL_State$get2 ? _SL_State$get2 : null;
        if (productList) {
            hdReport.itemListView({
                productsInfo: {
                    productSortation,
                    productList
                }
            });
            productList.forEach((function(product, index) {
                hdReport.itemView({
                    baseParams: {
                        module: 109,
                        component: 101,
                        action_type: 101
                    },
                    productInfo: report_objectSpread(report_objectSpread({}, product), {}, {
                        index
                    })
                });
            }));
        }
        window.SL_EventBus.on("global:hdReport:expose", (function(target) {
            var $target = __SL_$__(target);
            if ($target.hasClass(productItemClassName)) {
                var _window$HdSdk;
                var product_id = $target.data("id");
                var product_name = $target.data("name");
                var product_price = formatCurrency($target.data("price"));
                var position = $target.data("index") + 1;
                var status = $target.data("status") ? "soldout" : "selling";
                null === (_window$HdSdk = window.HdSdk) || void 0 === _window$HdSdk ? void 0 : _window$HdSdk.shopTracker.report(eventid, {
                    event_name: "product_view",
                    product_id,
                    product_name,
                    product_price,
                    position,
                    status
                });
            } else if ($target.hasClass(productMenuClassName)) {
                var _window$HdSdk2, _window$HdSdk3;
                null === (_window$HdSdk2 = window.HdSdk) || void 0 === _window$HdSdk2 ? void 0 : _window$HdSdk2.shopTracker.report(eventid, {
                    page: "product_list",
                    event_name: "component_view",
                    custom_component: "product_menu"
                });
                null === (_window$HdSdk3 = window.HdSdk) || void 0 === _window$HdSdk3 ? void 0 : _window$HdSdk3.shopTracker.report(eventid, {
                    event_name: "menu_view",
                    product_menu: ($target.data("all-show-sortation-ids") || "").split(", ")
                });
            }
        }));
        (0, report.collectObserver)({
            selector: productItemSelector
        });
        (0, report.collectObserver)({
            selector: productMenuSelector
        });
        var sortBy = {
            1: "default",
            2: "default",
            3: "newestToOldest",
            4: "priceLowToHigh",
            5: "priceHighToLow"
        };
        __SL_$__(document.body).on("click", productMenuSelector, (function() {
            var _window$HdSdk4;
            null === (_window$HdSdk4 = window.HdSdk) || void 0 === _window$HdSdk4 ? void 0 : _window$HdSdk4.shopTracker.report(eventid, {
                event_name: "click_component",
                page: "product_list",
                custom_component: "product_menu"
            });
        })).on("click", productMenuItemSelector, (function() {
            var _window$HdSdk5;
            null === (_window$HdSdk5 = window.HdSdk) || void 0 === _window$HdSdk5 ? void 0 : _window$HdSdk5.shopTracker.report(eventid, {
                event_name: "menu_click",
                product_menu: [ __SL_$__(this).data("sortation-id") ]
            });
        })).on("change", "#collection-sort", (function() {
            var _window$HdSdk6;
            null === (_window$HdSdk6 = window.HdSdk) || void 0 === _window$HdSdk6 ? void 0 : _window$HdSdk6.shopTracker.report(eventid, {
                event_name: "sort_click",
                sort_by: sortBy[__SL_$__(this).val()] || sortBy[1]
            });
        }));
        window.SL_EventBus.emit("global:hdReport:exit", [ eventid ]);
        function main_classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function");
        }
        function main_defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
                var descriptor = props[i];
                descriptor.enumerable = descriptor.enumerable || false;
                descriptor.configurable = true;
                if ("value" in descriptor) descriptor.writable = true;
                Object.defineProperty(target, descriptor.key, descriptor);
            }
        }
        function main_createClass(Constructor, protoProps, staticProps) {
            if (protoProps) main_defineProperties(Constructor.prototype, protoProps);
            if (staticProps) main_defineProperties(Constructor, staticProps);
            return Constructor;
        }
        function main_defineProperty(obj, key, value) {
            if (key in obj) Object.defineProperty(obj, key, {
                value,
                enumerable: true,
                configurable: true,
                writable: true
            }); else obj[key] = value;
            return obj;
        }
        var sideBar = new Sidebar({});
        sideBar.init();
        var CollectionsPage = function() {
            function CollectionsPage() {
                main_classCallCheck(this, CollectionsPage);
                main_defineProperty(this, "instance", null);
                sort();
                (0, createShadowDom["default"])();
            }
            main_createClass(CollectionsPage, [ {
                key: "onUnload",
                value: function() {
                    if (this.instance) {
                        var _this$instance;
                        null === (_this$instance = this.instance) || void 0 === _this$instance ? void 0 : _this$instance.destory();
                    }
                }
            } ]);
            return CollectionsPage;
        }();
        main_defineProperty(CollectionsPage, "type", "collections-page");
        (0, sectionsLoad.registrySectionConstructor)("collections-page", CollectionsPage);
    }
}, __webpack_require__ => {
    var __webpack_exec__ = moduleId => __webpack_require__(__webpack_require__.s = moduleId);
    __webpack_require__.O(0, [ "vendor" ], (() => __webpack_exec__("./src/assets/product/collections/main.js")));
    __webpack_require__.O();
} ]);