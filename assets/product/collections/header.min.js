"use strict";

(self["webpackChunkArise"] = self["webpackChunkArise"] || []).push([ [ "product-collection-header" ], {
    "./src/assets/product/collections/header.js": (__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {
        __webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");
        var sectionsLoad = __webpack_require__("../shared/browser/utils/sectionsLoad/index.js");
        var debounce = __webpack_require__("./node_modules/lodash/debounce.js");
        var debounce_default = __webpack_require__.n(debounce);
        __webpack_require__("./node_modules/core-js/modules/es.array.for-each.js");
        __webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js");
        __webpack_require__("./node_modules/core-js/modules/es.function.bind.js");
        __webpack_require__("./node_modules/core-js/modules/es.number.to-fixed.js");
        __webpack_require__("./node_modules/core-js/modules/es.number.constructor.js");
        function _classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function");
        }
        function _defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
                var descriptor = props[i];
                descriptor.enumerable = descriptor.enumerable || false;
                descriptor.configurable = true;
                if ("value" in descriptor) descriptor.writable = true;
                Object.defineProperty(target, descriptor.key, descriptor);
            }
        }
        function _createClass(Constructor, protoProps, staticProps) {
            if (protoProps) _defineProperties(Constructor.prototype, protoProps);
            if (staticProps) _defineProperties(Constructor, staticProps);
            return Constructor;
        }
        var Banner = function() {
            function Banner() {
                var _this$$banner, _this$$banner$offset;
                _classCallCheck(this, Banner);
                this.$container = document.querySelector(".product-list-banner");
                this.$banner = __SL_$__("#productListBanner-parallax");
                this.$bannerTop = (null === (_this$$banner = this.$banner) || void 0 === _this$$banner ? void 0 : null === (_this$$banner$offset = _this$$banner.offset()) || void 0 === _this$$banner$offset ? void 0 : _this$$banner$offset.top) || 0;
                this.speed = 2;
                this.isInit = false;
                this.isVisible = false;
                this.isParallax = false;
            }
            _createClass(Banner, [ {
                key: "init",
                value: function() {
                    var _this = this;
                    if (this.isInit) this.destory();
                    this.isInit = true;
                    if (!this.$banner) return;
                    this.setSizes();
                    var isParallax = __SL_$__("#productListBanner-parallax").attr("data-parallax-scroll");
                    if ("true" === isParallax) this.scrollHandler();
                    var observer = new IntersectionObserver((function(entries) {
                        entries.forEach((function(entry) {
                            _this.isVisible = entry.isIntersecting;
                            if (_this.isVisible) __SL_$__(window).on("scroll", _this.onScroll.bind(_this)); else __SL_$__(window).off("scroll", _this.onScroll.bind(_this));
                        }));
                    }), {
                        rootMargin: "0px 0px 0px 0px"
                    });
                    observer.observe(this.$container);
                    __SL_$__(window).on("resize", this.debounceSetSizes.bind(this));
                }
            }, {
                key: "debounceSetSizes",
                value: function() {
                    return debounce_default()(this.setSizes.bind(this), 250);
                }
            }, {
                key: "onScroll",
                value: function() {
                    if (!this.isVisible) return;
                    var isParallax = __SL_$__("#productListBanner-parallax").attr("data-parallax-scroll");
                    if ("true" !== isParallax) return;
                    requestAnimationFrame(this.scrollHandler.bind(this));
                }
            }, {
                key: "scrollHandler",
                value: function() {
                    var _this$$container;
                    var viewPortHeight = __SL_$__(window).height();
                    var _this$$container$getB = null === (_this$$container = this.$container) || void 0 === _this$$container ? void 0 : _this$$container.getBoundingClientRect(), top = _this$$container$getB.top, height = _this$$container$getB.height;
                    if (!top && !height) return false;
                    var movableDistance = viewPortHeight + height;
                    var currentDistance = viewPortHeight - top;
                    var percent = (currentDistance / movableDistance * this.speed * 38).toFixed(2);
                    var num = 38 - Number(percent);
                    __SL_$__("#productListBanner-parallax").css("transform", "translate3d(0 , ".concat(-num, "% , 0)"));
                }
            }, {
                key: "setSizes",
                value: function() {
                    var _document$querySelect, _document$querySelect2;
                    var domTop = (null === (_document$querySelect = document.querySelector("#productListBanner-parallax")) || void 0 === _document$querySelect ? void 0 : null === (_document$querySelect2 = _document$querySelect.getBoundingClientRect()) || void 0 === _document$querySelect2 ? void 0 : _document$querySelect2.top) || 0;
                    this.$elTop = domTop + window.scrollY;
                }
            }, {
                key: "destory",
                value: function() {
                    this.$banner.css("transform", "none");
                    __SL_$__(window).off("scroll", this.onScroll.bind(this));
                    __SL_$__(window).off("resize", this.debounceSetSizes.bind(this));
                    this.isInit = false;
                }
            } ]);
            return Banner;
        }();
        function header_classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function");
        }
        function header_defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
                var descriptor = props[i];
                descriptor.enumerable = descriptor.enumerable || false;
                descriptor.configurable = true;
                if ("value" in descriptor) descriptor.writable = true;
                Object.defineProperty(target, descriptor.key, descriptor);
            }
        }
        function header_createClass(Constructor, protoProps, staticProps) {
            if (protoProps) header_defineProperties(Constructor.prototype, protoProps);
            if (staticProps) header_defineProperties(Constructor, staticProps);
            return Constructor;
        }
        var CollectionsHeader = function() {
            function CollectionsHeader() {
                header_classCallCheck(this, CollectionsHeader);
                var collectionsBanner = new Banner;
                collectionsBanner.init();
                this.instance = collectionsBanner;
            }
            header_createClass(CollectionsHeader, [ {
                key: "onUnload",
                value: function() {
                    if (this.instance) {
                        var _this$instance;
                        null === (_this$instance = this.instance) || void 0 === _this$instance ? void 0 : _this$instance.destory();
                    }
                }
            } ]);
            return CollectionsHeader;
        }();
        (0, sectionsLoad.registrySectionConstructor)("collections-header", CollectionsHeader);
    }
}, __webpack_require__ => {
    var __webpack_exec__ = moduleId => __webpack_require__(__webpack_require__.s = moduleId);
    __webpack_require__.O(0, [ "vendor" ], (() => __webpack_exec__("./src/assets/product/collections/header.js")));
    __webpack_require__.O();
} ]);