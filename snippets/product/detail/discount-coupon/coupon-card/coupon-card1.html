{{ assign 'currentActivityInfoItem' (itemAt activityCustomInfo 0)}}
{{ assign 'productDetailConfig' salesEnvCustomInfo.productDetailConfig}}

{{assign 'containerStyle' ''}}
{{#if productDetailConfig.discountCodeBgColor}}
  {{assign 'containerStyle' (append 'background-color:' productDetailConfig.discountCodeBgColor ';')}}
{{/if}}

{{assign 'textColorStyle' ''}}
{{#if productDetailConfig.textColor}}
  {{assign 'textColorStyle' (append 'color:' productDetailConfig.textColor ';')}}
{{/if}}

{{assign 'textColorOpStyle' ''}}
{{#if productDetailConfig.textColor}}
  {{assign 'textColorOpStyle' (append 'color:' (rgba productDetailConfig.textColor 0.7) ';')}}
{{/if}}

{{assign 'discountCodeTextStyle' ''}}
{{#if productDetailConfig.discountCodeTextColor}}
  {{assign 'discountCodeTextStyle' (append 'color:' productDetailConfig.discountCodeTextColor ';')}}
{{/if}}

{{assign 'discountConditionStyleText' ''}}
{{#if productDetailConfig.discountConditionStyleText}}
  {{assign 'discountConditionStyleText' productDetailConfig.discountConditionStyleText}}
{{/if}}

{{assign 'discountBenefitStyleText' ''}}
{{#if productDetailConfig.discountBenefitStyleText}}
  {{assign 'discountBenefitStyleText' productDetailConfig.discountBenefitStyleText}}
{{/if}}

{{ assign "config" (sales_promotion_tag_translate benefitCondition benefitType)}}



{{!-- 优惠券样式1 或者 自定义 --}}
<div class="d-flex sales-discount-coupon-card1__container sales-discount-coupon-hook" data-discount-code="{{discountCode}}" style="{{containerStyle}}">
  {{ snippet 'sales/card-background' mobileBgImg=productDetailConfig.discountBgImg_mobile pcBgImg=productDetailConfig.discountBgImg}}
  <div class="sales-discount-coupon-card1__left d-felx">
    {{!-- {{#if __customThresholdText}}
      <div class="sales-discount-coupon-card1__threshold" style="{{textColorStyle}}">
        {{noTranslationHTML __customThresholdText}}
      </div>
    {{/if}}
    {{#if __customDiscountText}}
      <div class="sales-discount-coupon-card1__discount {{#if benefitType '===' 3}}sales-discount-coupon-card1__discount--bold{{/if}}" style="{{textColorStyle}}">
        {{noTranslationHTML __customDiscountText}}
      </div>
    {{/if}} --}}
    {{#if discountConditionStyleText}}
      <div class="sales-discount-coupon-card1__threshold" style="{{textColorStyle}}">
        {{javascript_template discountConditionStyleText (toRegex '\{\s*(\w+)\s*\}' flags="g") condition=thresholdValText.string benefitCount=benefitCondition.benefit.benefitCount}}
      </div>
    {{/if}}
    {{#if discountBenefitStyleText}}
      <div class="sales-discount-coupon-card1__discount {{#if benefitType '===' 3}}sales-discount-coupon-card1__discount--bold{{/if}}" style="{{textColorStyle}}">
        {{javascript_template discountBenefitStyleText (toRegex '\{\s*(\w+)\s*\}' flags="g") discount=discountValText.string}}
      </div>
    {{/if}}
    {{#if prerequisiteShippingPriceRange '>' 0}}
      <div class="sales-discount-coupon-card1__below" style="{{textColorOpStyle}}">
        {{noTranslationHTML __customShippingPriceRangeText}}
      </div>
    {{/if}}
    {{#if targetUserType}}
      {{#if targetUserType '==' 6}}
        <div class="sales-discount-coupon-card1__customers" style="{{textColorOpStyle}}">{{t 'sales.discount_coupon.specified_customer'}}</div>
      {{/if}}
      {{#if targetUserType '==' 5}}
        <div class="sales-discount-coupon-card1__customers" style="{{textColorOpStyle}}">{{t 'sales.discount_coupon.specified_customer'}}</div>
      {{/if}}
      {{#if targetUserType '==' 2}}
        <div class="sales-discount-coupon-card1__customers" style="{{textColorOpStyle}}">{{t 'sales.discount_coupon.coupon_content_level' level=currentActivityInfoItem.level}}</div>
      {{/if}}
    {{/if}}
    {{#if endTime}}
      <div class="sales-discount-coupon-card1__expire" style="{{textColorOpStyle}}">
        {{{t 'sales.discount_coupon.active_date_until' endTime=(javascript_template '<span data-timestamp="${endTime}" data-format="MMM D,YYYY"></span>' endTime=endTime)}}}
      </div>
    {{/if}}
  </div>
  <div class="sales-discount-coupon-card1__right d-flex">
    <div class="sales-discount-coupon-card1__code-name notranslate" style="{{discountCodeTextStyle}}">{{discountCode}}</div>
    <div class="text-uppercase fw-bold sales-discount-coupon-card1__button sales-discount-coupon-card-btn-hook"
      data-apply="{{t 'sales.discount_coupon.apply'}}"
      data-applied="{{t 'sales.discount_coupon.applied'}}"
      data-is-custom="{{#if couponTemplate '===' '2'}}true{{/if}}"
      data-btn-bg-color="{{productDetailConfig.btnBgColor}}"
      data-btn-text-color="{{productDetailConfig.btnTextColor}}"
      style="{{#if productDetailConfig.btnBgColor}}background-color:{{productDetailConfig.btnBgColor}};{{/if}}{{#if productDetailConfig.btnTextColor}}color: {{productDetailConfig.btnTextColor}};{{/if}}">
      {{t 'sales.discount_coupon.apply'}}
    </div>
  </div>
</div>
